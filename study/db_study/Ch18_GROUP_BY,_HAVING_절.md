# 공부한 내용


## 1. 집계 함수**(Aggregate Function)**

집계 함수는 행이 아닌 열에 대한 연산을 맡는다. 예를 들어 다음과 같은 테이블이 있다면, AVG(age) 등의 표현을 통해 나이의 평균값을 구할 수 있다.

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/5486ac02-837a-4340-b853-a8cd7b03f65f/b41eedc5-7409-4ad6-8b34-fc1e322918ed/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-03-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.04.17.png)

다음은 집계 함수의 종류이다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_193.jpg)

## 2. GROUP BY 절

WHERE 절을 통해서 1차적으로 데이터를 가공했다면, GROUP BY 절을 이용했을 때 2차적으로 데이터를 가공할 수 있다. 보통 GROUP BY + HAVING 의 조합으로 사용된다.

예를 들어 GROUP BY name 을 쿼리에 넣었을 때, 이름이 같은 행인 EJW, BBK 등은 모두 하나의 행으로 묶이게 된다.

![](https://prod-files-secure.s3.us-west-2.amazonaws.com/5486ac02-837a-4340-b853-a8cd7b03f65f/643d8ab0-0fab-41a6-a770-c04348fe964e/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2024-03-03_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_8.34.42.png)

## 3. HAVING 절

GROUP BY로 묶은 집단에 추가적으로 조건을 추가할 수 있는 표현이다. 주로 집계함수 + GROUP BY + HAVING 의 조합으로 많이 쓰인다.

집계 함수는 WHERE 절과는 같이 못 쓰기 때문에, 집계 함수가 나오면 자연스럽게 HAVING 절을 사용한다고 생각하면 편할 것 같다.

## 4. **CASE 표현을 활용한 월별 데이터 집계**

음… 이건 진짜 많이 어려워서 아예 스킵하고 나중에 다시 봐야 할 것 같다.

일단은 CASE 표현을 GROUP BY, 집계 표현과 같이 사용하면 정규화를 거쳐서 정보가 상당히 분산된 테이블 사이에서도 의미있는 집계 보고서를 낼 수 있다는 말인 것 같다.

## 5. 집계 함수와 NULL

개별 데이터 값이 NULL일 때, 굳이 그 값을 0으로 바꾸려고 함수를 사용할 필요는 없다. 어차피 GROUP BY를 통한 연산에서 NULL값은 제외되기 때문이다.

따라서 NULL을 0으로 바꾸는 작업은, 개별 데이터에 대해서 하기엔 비효율적이고 SUM(age)와 같은 집계함수의 값이 NULL일 때에 한해서 진행하는 것이 효율적이다.

# 어려웠던 내용


CASE 표현을 활용한 월별 데이터 집계 내용이 아예 이해가 안되서 포기했다.

뭔가 SQL 쿼리에서 저런 식으로까지 복잡하게 if문, 조건문을 붙인다는 게 좀 끝판왕 개념이 아닌가 싶다.

나중에 내공이 늘었을 때 다시 봐야할 것 같다.

# 궁금한 내용 / 부족한 내용


SQL 쿼리를 연습할 수 있는 오라클의 서비스입니다.

[Oracle Live SQL](https://livesql.oracle.com/)

# 느낀점


뭔가 개념 자체가 어려운 내용은 아닌데, 확실히 이 부분은 실습을 많이 해봐야할 것 같다.

직접 테이블을 만들어서 쿼리를 여러 개 짜봐야 할 것 같다.