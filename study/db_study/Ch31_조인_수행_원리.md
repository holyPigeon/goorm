# 공부한 내용

## 1. NL Join

NL Join은 중첩된 반복문과 같다. 선행 테이블과 후행 테이블, 또는 외부 테이블과 내부 테이블이 존재한다.

선행 테이블의 조건을 만족하는 행을 먼저 추출하고, 그 다음에 후행 테이블을 읽는 방식으로 조인을 수행하기 때문에 “조건을 만족하는 행이 적은 테이블”을 선행 테이블로 두어야 해야 할 일이 줄어든다.

또한 NL Join의 경우, 랜덤 엑세스라는 방식을 가지고 있기 때문에 대량의 데이터에 접근할 경우, I/O가 많이 발생하면서 성능 저하가 일어난다는 단점이 있다. 따라서 되도록 좁은 범위로 처리하는 것이 유리하다.

### 작동 원리

1. 선행 테이블에서 조건에 만족하는 행을 찾는다. 만약 조건에 만족하는 행이 없다면 스킵!
2. 선행 테이블의 조인 키를 가지고 후행 테이블에 조인 키가 있는지 확인한다. 조인 키각 없다면 스킵!
3. 모두 조건을 만족하면 해당 행을 추출버퍼에 넣는다.

추가로, NL Join은 조인 성공 시, 그 결과를 바로 보여준다는 특징을 가지고 있다.

## 2. Sort Merge Join

Sort Merge Join은 조인 칼럼을 기준으로 데이터를 정렬하여 조인하는 방식이다.

NL Join과는 달리 랜덤 엑세스 방식이 아닌 스캔 방식을 통해 데이터를 읽는다. 따라서 넓은 범위의 데이터를 처리할 때 주로 사용된다.

(다만 메모리로 감당이 안되면 디스크를 임시적으로 사용하기 때문에 성능이 떨어질 수 있다.)

일반적으로 대량의 조인 작업에서는 CPU 작업 위주의 Hash Join이 성능상 유리하긴 하지만, Sort Merge Join은 비동등 조인 작업 또한 가능하다는 점에서 범용성이 더 좋다고 할 수 있다.

### 작동 원리

선행 테이블 스캔 → 정렬 → 후행 테이블 스캔 → 정렬 → 추출 버퍼 이동

Sort Merge Join은 인덱스를 필요로 하지 않기 때문에, 인덱스가 없어도 사용 가능하다.

## 3. Hash Join

조인 칼럼을 기준으로 동일한 해쉬값을 갖는 데이터끼리 실제 값을 비교하여 조인하는 방식이다. 대충 NL Join과 Merge Sort Join의 단점을 보완하는 방향으로 간다고 생각하면 편하다.

- NL Join에서의 랜덤 엑세스에서 발생하는 대량 데이터에 접근했을 때 성능이 저하되는 문제
- Sort Merge Join에서의 정렬 작업으로 인한 부담 문제

### 작동 원리

그냥 해싱을 쓴다고 한다.. 스킵

## 4. 그래서 이것들은 언제 어떻게 써야 되는가?

고민하지 않아도 된다… 이미 천재적인 선대 개발자들이 만들어놓은 그저 GOAT… 옵티마이저가 있기 때문에 맘 놓고 조인을 갈겨도 알아서 적절한 방식으로 조인을 해준다.

물론 조인을 하기 전에 사람이 고려해봐야할 것들이 있다. 테이블이 너무 정규화가 잘 되서 조인으로 인한 조회 성능이 떨어지지는 않는지? 각 조인 방식에 유용하게 쓰일만한 인덱스가 잘 갖춰져 있는지? 등등…

# 궁금한 내용 / 부족한 내용


# 느낀점
