# 공부한 내용

---

## 1. SQL 처리과정

과거에는 SQL의 데이터 처리 과정을 프로그래머가 직접 작성해야 헀지만, 지금은 옵티마이저가 이 부분을 담당하기 때문에 직접 짜지 않아도 된다. (옵티마이저가 짠 실행 계획에 의해 처리된다.)

실행 계획이 만들어지는 과정은 크게 SQL 파싱, SQL 최적화로 나눌 수 있다.

### SQL 파싱

- SQL 파싱은 다음과 같은 순서로 처리된다.
  - SQL에 문법적으로 문제가 없는지 확인한다.
  - SQL에 의미적으로 문제가 없는지 확인한다. (권한이 없는 것은 아닌지, 존재하지 않는 테이블은 아닌지)
  - 해당 SQL과 실행계획이 라이브러리 캐시에 캐싱되었는지 확인한다.

- 파싱의 종류는 다음과 같다.
  - 소프트 파싱(Soft Parsing) : SQL과 실행계획을 캐시에서 찾아 곧바로 실행단계로 넘어가는 경우를 말함
  - 하드 파싱(Hard Parsing) : SQL과 실행계획을 캐시에서 찾지 못해 최적화 과정을 거치고 나서 실행단계로 넘어가는 경우를 말함

### SQL 최적화

SQL 최적화란 무엇일까. 말 그대로 사용자가 요청한 SQL을 최적의 처리경로로 처리해주는 작업이다.

하지만 이러한 처리경로는 그냥 나오는 것이 아니며, 옵티마이저가 부지런히 실행계획들을 생성하고 평가한 후에 나오게 된다. 경우의 수가 늘수록 작업이 굉장히 무거워지기 때문에 하드 파싱이라고 부른다.

이렇게 무거운 작업을 매번 할 수는 없기 때문에, “이 SQL에 대해서는 이 실행계획이 Best였다” 라는 경험을 캐싱을 통해 누적시키고, 추후 동일한 작업에 대해서는 캐싱된 실행계획을 사용하게 되는데 이것이 소프트 파싱이다.

