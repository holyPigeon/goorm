# 공부한 내용

## 1. 데이터베이스 Call과 종류

### SQL 커서에 대한 작업 요청에 따른 분류

먼저 “커서”라는 개념에 대해 알아보고 가자. 커서란, 쿼리문에 의해 반환되는 결과값들을 저장하는 메모리 공간을 뜻한다.

쉽게 말해, SQL 파싱 및 최적화를 거쳐 도출된 실행계획에 따라 실제로 데이터를 검색하고, 그에 따른 결과집합을 반환하는 것이 바로 “커서”이다.

- 커서에 대한 작업 요청에 따른 분류는 다음과 같다.
  - Parse Call → SQL 파싱을 요청하는 Call
  - Execute Call → SQL 실행을 요청하는 Call
  - Fetch Call → SELECT문의 결과 데이터 전송을 요청하는 Call

### Call 발생 위치에 따른 구분

- User Call
  - DBMS 외부로부터 요청되는 Call
- Recursive Call
  - DBMS 내부로부터 요청되는 Call

음… 일단 User Call이 많이 생기면 안된다는 것을 지속적으로 강조한다. 다음과 같은 방법을 통해 User Call을 줄일 수 있다.

- **Loop 쿼리 해소와 집합적 사고**
  - 한 개의 쿼리를 여러 번 사용하지 말고, 집합으로 처리할 수 있는 쿼리로 한 번만 사용하자는 뜻이다.
- **Array Processing**
  - 이 역시 위와 비슷한 내용이다. 단일 행이 아닌 여러 행 단위로 처리하면 좋다.
- **효과적인 화면 페이지 처리**
  - 화면에 데이터를 표시할 때 한 번에 모든 데이터를 표시하는 것이 아닌, 필요한 부분만 데이터를 표시하는 것이 좋다.

    (ex. 게시판 페이지가 있을 때, 전체 5000페이지가 있더라도 사용자 입장에서는 대충 50페이지 이후부터는 볼 확률이 거의 없으므로 50페이지까지만 데이터를 로드한다.)

- **사용자 정의 함수/프로시저/트리거의 적절한 활용**
  - 이상하게 쓰면 안된다고 한다… 이건 잘 모르겠다

Recursive Call의 경우 SQL 파싱과 최적화 과정에서 발생하는 다양한 SQL 수행이 이에 해당한다.

Recursive Call을 최대한 줄이려면, 1차적으로 바인드 변수를 적극적으로 사용함으로써 하드파싱 횟수를 최대한 줄이는 것이 좋다. 2차적으로는 “사용자 정의 함수 / 프로시저 / 트리거”를 적절하게 활용해야 한다.

















