# 공부한 내용

## 들어가기 전에

트랜잭션이란 무엇일까? 트랜잭션(Transaction)은 업무 처리를 위한 논리적인 작업 단위다.

앞에서 많이 본 개념이긴 하지만 다시 설명해보겠다…

우리는 DB에서 기본적으로 CRUD를 포함, 여러가지의 작업을 수행하게 되는데, 이 중에는 중간에 간섭을 받으면 안되는, 만약 간섭을 받는다면 치명적인 오류가 발생하는 작업들이 존재한다.

예를 들면 수정 작업의 경우, 수정할 값을 사용자로부터 받고 → 기존 값을 지우고 → 수정할 값을 삽입하는 등의 일련의 작업이 필요한데, 중간에 생길 수 있는 피치못할 간섭을 방지하기 위해 해당 작업들을 하나의 “트랜잭션”이라는 단위로 묶는다.

트랜잭션으로 묶인 작업들은 중간까지만 실행되는 경우가 없으며, 무조건 커밋 or 롤백의 과정을 거친다.

## 1. 트랜잭션의 특징

- 다음과 같은 4가지 특징이 있다. 줄여서 ACID라고 부른다.
  - 원자성(Atomicity) → 트랜잭션은 더 이상 분해가 불가능한 업무의 최소단위이므로, 전부 처리되거나 아예 하나도 처리되지 않아야 한다.
  - 일관성(Consistency) → 일관된 상태의 데이터베이스에서 하나의 트랜잭션을 성공적으로 완료하고 나면 그 데이터베이스는 여전히 일관된 상태여야 한다. 즉, 트랜잭션 실행의 결과로 데이터베이스 상태가 모순되지 않아야 한다.
  - 격리성(Isolation) → 실행 중인 트랜잭션의 중간결과를 다른 트랜잭션이 접근할 수 없다.
  - 영속성(Durability) → 트랜잭션이 일단 그 실행을 성공적으로 완료하면 그 결과는 데이터베이스에 영속적으로 저장된다.

## 2. 트랜잭션 격리성

트랜잭션의 격리성은 Lock의 강도에 따라 결정된다.

### 만약 격리성이 낮다면?

1. Dirty Read

   아직 트랜잭션이 완료되지 않았는데 해당 리소스에 다른 트랜잭션이 개입해 값을 읽는다면, 해당 트랜잭션은 비일관된 상태에 놓이게 된다.

2. Non-Repeatable Read

   한 트랜잭션 내에서 똑같은 작업을 2번 수행했는데, 그 사이에 다른 트랜잭션이 개입하여 앞뒤 결과가 달라지는 현상을 뜻한다.








