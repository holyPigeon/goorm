# 공부한 내용

인덱스는 무엇일까? 인덱스는 데이터를 빠르게 탐색하기 위한 수단이며, 간단하게 비유하자면 책에서의 맨 앞 목차라고 할 수 있다.

## 1. 인덱스 구조

### 인덱스 구조

사실 뭐 구조야 많을 수 있지만 인덱스에서는 그냥 B 트리 구조만 알고가면 된다.

말 그대로 트리구조이며, 이름이 B 트리인 이유는 Balanced Tree이기 때문이다. B 트리 구조는 루트, 브랜치, 리프 노드로 이루어져 있으며, 각 리프 노드는 양방향으로 연결되어있다.

### 인덱스 탐색

인덱스 탐색 과정은 수직적 탐색과 수평적 탐색으로 나눌 수 있다.

- 각각 다음을 의미한다.
  - 수평적 탐색 → 리프 노드끼리 이동
  - 수직적 탐색 → 루트에서 리프 노드로 이동

## 2. 다양한 인덱스 스캔 방식

### Index Range Scan

인덱스 루트 블록에서 리프 블록까지 수직적으로 탐색한 후에 리프 블록을 필요한 범위(Range)만 스캔하는 방식이다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_331.jpg)

B Tree 인덱스의 가장 일반적이고 정상적인 형태의 엑세스 방식이다. 인덱스의 범위 스캔은 인덱스를 구성하는 선두 컬럼을 조건절에 사용하는 등의 방법을 통해 가능하다.

### Index Full Scan

수직적 탐색없이 인덱스 리프 블록을 처음부터 끝까지 수평적으로 탐색하는 방식이다. 데이터 검색을 위한 최적의 인덱스가 없을 때 차선으로 선택된다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_332.jpg)

어쨌든간에 Full Scan 방식이기 때문에 아주 효율적인 방식은 아니다. 하지만 그럼에도 Table Full Scan 보다는 효율적일 수 있다.

조건절이 없는 쿼리에서는 Table Full Scan을 우선적으로 고려할 수밖에 없는데, 만약 Index Full Scan을 이용해 대부분의 데이터를 필터링할 수 있다면, Table Full Scan보다 비용이 적다.

### Index Unique Scan

수직적 탐색만으로 데이터를 찾는 스캔 방식으로서, Unique 인덱스를 ‘=’ 조건으로 탐색하는 경우에 작동한다. 특정 값에 대해 매우 빠르고 정확하게 접근한다는 특징이 있다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_335.jpg)

### Index Skip Scan

앞에서는 인덱스 선두 칼럼이 조건절에 빠지면 Index Full Scan을 사용할 수 있다고 설명했다.

최근에는 이러한 조건절에 빠졌어도 인덱스를 활용할 수 있는 새로운 스캔방식이 나왔는데 Index Skip Scan이 바로 그것이다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_336.jpg)

기본적으로 조건에 부합하는 레코드를 포함할 “가능성이 있는” 하위 블록(브랜치 또는 리프 블록)만 골라서 액세스하는 방식이다.























