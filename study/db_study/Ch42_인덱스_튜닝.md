# 공부한 내용

## 1. 인덱스 튜닝 기초

### **범위 스캔이 불가능하거나 인덱스 사용이 아예 불가능한 경우 & 인덱스 칼럼의 가공**

일반적으로 쿼리 상의 조건절에서 인덱스 선두 칼럼을 가공해서 사용하면 정상적으로 인덱스를 사용할 수 없다. 인덱스 범위 스캔을 사용할 수 없거나, 아예 사용할 수 없는 것이다. 다음과 같은 경우이다.

```sql
select * from 업체 where substr(업체명, 1, 2) = '대한'
```

이럴 때는 아래와 같이 튜닝해야 한다.

![](https://dataonair.or.kr/publishing/img/knowledge/SQL_347.jpg)

결과적으로는 같은 의미이지만, 칼럼에는 어떠한 조작도 가하지 않고 나머지 조건을 바꿈으로써 정상적으로 인덱스 범위 스캔을 사용하도록 할 수 있다.

### 묵시적 형변환

간혹 조건절에 칼럼타입과 다른 값을 써서 묵시적 형변환을 일으키는 경우가 있다.

```sql
// 묵시적 형변환 작동. 인덱스를 정상적으로 사용
select * from emp where deptno = '20'

// 묵시적 형변환 적용. 인덱스를 사용하지 않고 Table Full Scan 사용
select * from emp where cdeptno = 20 
```

이처럼 묵시적 형변환을 사용하면 인덱스를 사용하지 않게되는 경우도 있다. 따라서 묵시적이 아닌 명시적으로 형변환을 해주는 것이 좋다.



















