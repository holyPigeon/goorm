# 공부한 내용

DBMS가 내부적으로 조인을 어떻게 수행하는지 알아보자!

## 1. NL Join(Nested Loop Join)

### 기본 메커니즘

NL Join의 기본 메커니즘은 중첩 for문과 같다.

```java
for(i=0; i<100; i++){ 
	...
	for(j=0; j<100; j++){ 
		... 
	} 
}
```

예를 들어 조인할 테이블이 3개라고 한다면, 2개의 테이블을 먼저 조인하고 그 다음에 합쳐진 테이블과 나머지 한 테이블을 마저 조인하게 되는데, 이 과정에서 for문이 쓰이게 된다.

### NL Join 수행과정 분석

![](https://velog.velcdn.com/images/eunhye_/post/098b3246-35f0-4e46-9b9c-71094e41f38e/image.png)

1. 먼저 선행 테이블에서 조건에 맞는 행을 스캔한다.
2. 선행 테이블의 조인 키를 통해 후행 테이블에도 조인 키가 존재하는지 확인한다.
3. 후행 테이블 인덱스에 선행 테이블의 조인 키가 존재하는지 확인한다.

   (만약 없다면 선행 테이블 데이터는 그대로 필터링한다.)

4. 조인 키가 존재한다면 인덱스의 레코드 식별자를 통해 후행 테이블에 엑세스한다.

### NL Join의 특징

- NL Join의 특징은 다음과 같다.
    - 선행 테이블을 Full Scan하기 때문에 선행 테이블의 크기가 작을수록 유리하다.
    - 후행 테이블에 대해서는 반드시 인덱스가 있어야 조인이 가능하다.
        - 따라서 인덱스 구성 전략의 영향을 크게 받는다. 인덱스가 있는지 없는지, 또는 해당 인덱스의 칼럼 구성이 어떤지에 따라 조인 효율이 크게 달라진다.
    - 랜덤 엑세스 방식을 사용하므로, 처리 방식이 좁을수록 유리하다.





















