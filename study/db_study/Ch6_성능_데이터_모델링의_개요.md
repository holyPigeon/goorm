# 공부한 내용


## 1. 성능 데이터 모델링의 정의

실무 프로젝트에서는 개발자가 SQL 쿼리를 잘못 짜서 성능이 저하될 때도 있지만, 근본적으로 데이터 모델링이 잘못되어 성능이 저하되는 경우도 많다.

성능 향상을 위해 고려할 것은 3가지가 있다. 데이터 모델의 구조, 대용량 데이터, 그리고 인덱스이다.

여기서 성능이라 함은, 대부분 조회 성능에 해당한다. 데이터 입력, 수정, 삭제의 경우 단건 처리가 많지만, 조회의 경우 대용량으로 처리하는 경우가 많기 때문이다.

성능 데이터 모델링의 방법으로 대체로 반정규화를 많이 꼽는데, 그 외에도 여러 방법이 있다.

## 2. 성능 데이터 모델링 시점

성능 데이터 모델링은 가능한 빨리 하는 것이 비용도 덜 들고 제일 좋다. 제일 빠른 시점은 분석/설계 단계를 뜻한다. (이미 DB 설계가 끝나고 개발중인 프로젝트에서 DB를 다시 개편하는 것은 리스크가 크기 때문에)

중요한 트랜잭션의 경우, 프로젝트 초기에 테스트 환경을 구현해서 실제 성능을 테스트해볼 필요가 있다.

## 3. 성능 데이터 모델링 고려사항

성능 데이터 모델링의 프로세스는 다음과 같다.

1. 데이터 모델링을 할 때 정규화를 정확하게 수행한다.
2. 데이터베이스 용량산정을 수행한다.
3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다.
4. 용량과 트랜잭션의 유형에 따라 반정규화를 수행한다.
5. 이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정 등을 수행한다.
6. 성능관점에서 데이터 모델을 검증한다.

# 어려웠던 내용


## 성능 데이터 모델링 고려사항

> 1. 데이터 모델링을 할 때 정규화를 정확하게 수행한다.
2. 데이터베이스 용량산정을 수행한다.
3. 데이터베이스에 발생되는 트랜잭션의 유형을 파악한다.
4. 용량과 트랜잭션의 유형에 따라 반정규화를 수행한다.
5. 이력모델의 조정, PK/FK조정, 슈퍼타입/서브타입 조정 등을 수행한다.
6. 성능관점에서 데이터 모델을 검증한다.
>

솔직히…뭔 소린지 잘 모르겠다. 일단 모르는 용어들도 많고, 텍스트로만 보니 추상적이어서 잘 이해가 가지 않는다. 뒷 부분을 좀 더 공부해보면 얼추 이해할 수 있지 않을까 싶어 일단 스킵해야겠다.

## 용어 정리

일단 모르는 용어에 대해서 좀 짚고 가기로 했다.

- 데이터베이스 용량산정?
    - 데이터베이스에 저장될 데이터의 양, 데이터베이스가 지원해야 하는 동시 사용자 수, 트랜잭션의 비율, 데이터 성장률 등 다양한 요소들을 바탕으로 해당 DB가 어느정도의 용량을 차지할 것인지 판단한다.
- 데이터베이스 이력모델 조정?
    - DB 상에서 데이터의 변경 사항(변경된 내용, 변경된 시간 등)을 추적하기 위한 모델을 이력모델이라 한다. 해당 모델을 조정하는 작업이다.
    - 데이터 추적, 복원, 분석 등 다양한 곳에 사용된다.

- 정규화, 반정규화, 트랜잭션 등의 용어는 이후 챕터에서 학습할 예정이기 때문에 스킵한다.

# 궁금한 내용 / 부족한 내용


정규화와 반정규화에 대한 내용을 아직 안 배웠는데, 자료에서 끊임없이 나오는 걸 보니 이게 도대체 뭔지 궁금하고, 머리도 아프다. 어차피 바로 다음 챕터에서 배울 내용이라 아직까지는 그럭저럭 몰라도 적당히 넘어가고 있긴 하다.

# 느낀점


인터넷에 검색했을 때는 DB 쪽 성능 개선에 관한 내용으로 SQL 쿼리 튜닝 얘기가 거의 계속 나왔는데, 쿼리 튜닝 만큼이나 중요한 것이 성능 데이터 모델링이란 것을 알게 되었다.

근데 검색하다보니 알겠는 게, 성능 데이터 모델링에 대한 개선에 대한 내용이 애초에 많이 나오기가 좀 힘들 긴 한 것 같다. 사실상 젠가를 이미 10층까지 쌓아놨는데 1, 2층을 어떻게 건드려본다는 이야기라 현업에서 그런 일은 거의 없을 것 같다 ㅋㅋㅋ

그래서 자료에서도 계속 강조하는 것이, 초반에 무조건 데이터 모델링을 잘 해놔야 된다라는 내용이다. 잘못해놨다면 뒤로 갈수록 비용이 어마어마하게 들기 때문에…

초반 설계 중요성에 대한 이야기를 지속적으로 가스라이팅 수준으로 받다 보니 뭔가 나 같은 데이터베이스 뉴비는 손도 대면 안 될 것 같다라는 생각이 들지만, 뭐 어차피 내가 만들 서비스가 네이버/카카오만큼 커질 것도 아니기 때문에 너무 부담가지지 말고 차근차근 데이터 모델링을 연습해보면 좋을 것 같다. 😀